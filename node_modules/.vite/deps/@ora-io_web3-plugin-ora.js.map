{
  "version": 3,
  "sources": ["../../@ora-io/web3-plugin-ora/src/types.ts", "../../@ora-io/web3-plugin-ora/src/prompt_abi.ts", "../../@ora-io/web3-plugin-ora/src/ora_plugin.ts", "../../@ora-io/web3-plugin-ora/src/index.ts"],
  "sourcesContent": ["\nexport enum Chain {\n    MAINNET = \"0xb880D47D3894D99157B52A7F869aB3B1E2D4349d\",\n    SEPOLIA = \"0xe75af5294f4CB4a8423ef8260595a54298c7a2FB\",\n    OPTIMISM = \"0xC3287BDEF03b925A7C7f54791EDADCD88e632CcD\",\n    OPTIMISM_SEPOLIA = \"0x3c8Cd1714AC9c380702D160BE4cee0D291Eb89C0\",\n    ARBITRUM = \"0xC20DeDbE8642b77EfDb4372915947c87b7a526bD\",\n    ARBITRUM_SEPOLIA = \"0xC3287BDEF03b925A7C7f54791EDADCD88e632CcD\",\n    MANTA = \"0xBC24514E541d5CBAAC1DD155187A171a593e5CF6\",\n    MANTA_SEPOLIA = \"0xC20DeDbE8642b77EfDb4372915947c87b7a526bD\",\n    LINEA = \"0xC20DeDbE8642b77EfDb4372915947c87b7a526bD\",\n    BASE = \"0xC20DeDbE8642b77EfDb4372915947c87b7a526bD\",\n    POLYGON = \"0xC20DeDbE8642b77EfDb4372915947c87b7a526bD\"\n}\n\nexport enum SimplePromptAddresses {\n    MAINNET = \"0x61423153f111BCFB28dd264aBA8d9b5C452228D2\",\n    SEPOLIA = \"0x696c83111a49eBb94267ecf4DDF6E220D5A80129\",\n    OPTIMISM = \"0xBC24514E541d5CBAAC1DD155187A171a593e5CF6\",\n    OPTIMISM_SEPOLIA = \"0xf6919ebb1bFdD282c4edc386bFE3Dea1a1D8AC16\",\n    ARBITRUM = \"0xC3287BDEF03b925A7C7f54791EDADCD88e632CcD\",\n    ARBITRUM_SEPOLIA = \"0xBC24514E541d5CBAAC1DD155187A171a593e5CF6\",\n    MANTA = \"0x523622DfEd0243B0DF80CC9275764B0f432D33E3\",\n    MANTA_SEPOLIA = \"0x3bfD1Cc919bfeC7795b600E764aDa001b58f122a\",\n    LINEA = \"0xb880D47D3894D99157B52A7F869aB3B1E2D4349d\",\n    BASE = \"0xC3287BDEF03b925A7C7f54791EDADCD88e632CcD\",\n    POLYGON = \"0xC3287BDEF03b925A7C7f54791EDADCD88e632CcD\"\n}\n\nexport enum Models {\n    STABLE_DIFFUSION = 50,\n    LLAMA3 = 11,\n    OPENLM = 13\n}", "export const PromptABI = [\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"contract IAIOracle\",\n          \"name\": \"_aiOracle\",\n          \"type\": \"address\"\n        }\n      ],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"constructor\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"contract IAIOracle\",\n          \"name\": \"expected\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"contract IAIOracle\",\n          \"name\": \"found\",\n          \"type\": \"address\"\n        }\n      ],\n      \"name\": \"UnauthorizedCallbackSource\",\n      \"type\": \"error\"\n    },\n    {\n      \"anonymous\": false,\n      \"inputs\": [\n        {\n          \"indexed\": false,\n          \"internalType\": \"uint256\",\n          \"name\": \"requestId\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"address\",\n          \"name\": \"sender\",\n          \"type\": \"address\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"uint256\",\n          \"name\": \"modelId\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"string\",\n          \"name\": \"prompt\",\n          \"type\": \"string\"\n        }\n      ],\n      \"name\": \"promptRequest\",\n      \"type\": \"event\"\n    },\n    {\n      \"anonymous\": false,\n      \"inputs\": [\n        {\n          \"indexed\": false,\n          \"internalType\": \"uint256\",\n          \"name\": \"requestId\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"uint256\",\n          \"name\": \"modelId\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"string\",\n          \"name\": \"input\",\n          \"type\": \"string\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"string\",\n          \"name\": \"output\",\n          \"type\": \"string\"\n        },\n        {\n          \"indexed\": false,\n          \"internalType\": \"bytes\",\n          \"name\": \"callbackData\",\n          \"type\": \"bytes\"\n        }\n      ],\n      \"name\": \"promptsUpdated\",\n      \"type\": \"event\"\n    },\n    {\n      \"inputs\": [],\n      \"name\": \"aiOracle\",\n      \"outputs\": [\n        {\n          \"internalType\": \"contract IAIOracle\",\n          \"name\": \"\",\n          \"type\": \"address\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"requestId\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"internalType\": \"bytes\",\n          \"name\": \"output\",\n          \"type\": \"bytes\"\n        },\n        {\n          \"internalType\": \"bytes\",\n          \"name\": \"callbackData\",\n          \"type\": \"bytes\"\n        }\n      ],\n      \"name\": \"aiOracleCallback\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"modelId\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"internalType\": \"string\",\n          \"name\": \"prompt\",\n          \"type\": \"string\"\n        }\n      ],\n      \"name\": \"calculateAIResult\",\n      \"outputs\": [],\n      \"stateMutability\": \"payable\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"callbackGasLimit\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint64\",\n          \"name\": \"\",\n          \"type\": \"uint64\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"modelId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"estimateFee\",\n      \"outputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"modelId\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"internalType\": \"string\",\n          \"name\": \"prompt\",\n          \"type\": \"string\"\n        }\n      ],\n      \"name\": \"getAIResult\",\n      \"outputs\": [\n        {\n          \"internalType\": \"string\",\n          \"name\": \"\",\n          \"type\": \"string\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"requestId\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"isFinalized\",\n      \"outputs\": [\n        {\n          \"internalType\": \"bool\",\n          \"name\": \"\",\n          \"type\": \"bool\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"internalType\": \"string\",\n          \"name\": \"\",\n          \"type\": \"string\"\n        }\n      ],\n      \"name\": \"prompts\",\n      \"outputs\": [\n        {\n          \"internalType\": \"string\",\n          \"name\": \"\",\n          \"type\": \"string\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"\",\n          \"type\": \"uint256\"\n        }\n      ],\n      \"name\": \"requests\",\n      \"outputs\": [\n        {\n          \"internalType\": \"address\",\n          \"name\": \"sender\",\n          \"type\": \"address\"\n        },\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"modelId\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"internalType\": \"bytes\",\n          \"name\": \"input\",\n          \"type\": \"bytes\"\n        },\n        {\n          \"internalType\": \"bytes\",\n          \"name\": \"output\",\n          \"type\": \"bytes\"\n        }\n      ],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    },\n    {\n      \"inputs\": [\n        {\n          \"internalType\": \"uint256\",\n          \"name\": \"modelId\",\n          \"type\": \"uint256\"\n        },\n        {\n          \"internalType\": \"uint64\",\n          \"name\": \"gasLimit\",\n          \"type\": \"uint64\"\n        }\n      ],\n      \"name\": \"setCallbackGasLimit\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }\n  ] as const", "import { Web3PluginBase, Contract, ContractAbi, validator } from \"web3\";\nimport { Models} from \"./types\";\nimport { PromptABI } from \"./prompt_abi\";\n\nexport class ORAPlugin extends Web3PluginBase {\n  public pluginNamespace: string;\n  public defaultPromptAbi: ContractAbi;\n  public contract: Contract<typeof PromptABI>;\n\n  public constructor(\n    promptAddress: string,  \n    options?: {\n      pluginNamespace?: string;\n      defaultPromptAbi?: ContractAbi;\n    }\n  ) {\n    super();\n    this.pluginNamespace = options?.pluginNamespace ?? 'ora'\n    this.defaultPromptAbi = options?.defaultPromptAbi ?? PromptABI\n\n    if (!validator.isAddress(promptAddress)) {\n\t\t\tthrow new Error(\n\t\t\t\t`Provided priceFeedAddress is not a valid address: ${promptAddress}`,\n\t\t\t);\n\t\t}\n\n    this.contract = new Contract(\n      this.defaultPromptAbi,\n      promptAddress\n    )\n  }\n\n  public async getAIResult(\n    modelId: Models,\n    prompt: string\n  ) {\n    this.contract.link(this)\n    \n    if(this.contract.methods.getAIResult !== undefined){\n      return this.contract.methods.getAIResult(modelId, prompt).call();\n    }\n\n    throw new Error(\n      \"Unable to get AI result. Provided abi doesn't have getAIResult method.\"\n    )\n  }\n\n  public async estimateFee(\n    modelId: Models\n  ) {\n    this.contract.link(this)\n\n    if(this.contract.methods.estimateFee !== undefined){\n      return await this.contract.methods.estimateFee(modelId).call();\n    }\n\n    throw new Error(\n      \"Unable to get AI result. Provided abi doesn't have getAIResult method.\"\n    )\n  }\n\n  public async calculateAIResult(\n    from: string,\n    modelId: Models,\n    prompt: string,\n    estimatedFee: string,\n  ) {\n    this.contract.link(this)\n\n    if(this.contract.methods.calculateAIResult !== undefined){\n      return this.contract.methods.calculateAIResult(modelId, prompt).send({\n        from,\n        value: estimatedFee\n      });\n    }\n\n    throw new Error(\n      \"Unable to get AI result. Provided abi doesn't have getAIResult method.\"\n    )\n  }\n\n}\n\n// Module Augmentation\ndeclare module 'web3' {\n  interface Web3Context {\n    ora: ORAPlugin;\n  }\n}\n", "export * from './types';\nexport * from './ora_plugin';"],
  "mappings": "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",
  "names": ["Chain", "SimplePromptAddresses", "Models"]
}
